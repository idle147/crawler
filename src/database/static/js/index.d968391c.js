"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[826],{7600:function(e,t,l){l.r(t),l.d(t,{default:function(){return G}});var a=l(9740),n=(l(3694),l(9200),l(135)),r=(l(2760),l(3209)),s=(l(6905),l(3396)),u=l(7139),o=l(5994),c=l(6734);const i=(0,o.o8)({prefixCls:{type:String}}),p=(0,s.aZ)({name:"ElSpaceItem",props:i,setup(e,{slots:t}){const l=(0,c.s)("space"),a=(0,s.Fl)((()=>`${e.prefixCls||l.b()}__item`));return()=>(0,s.h)("div",{class:a.value},(0,s.WI)(t,"default"))}});var d=l(4870),f=l(3365);const g={small:8,default:12,large:16};function m(e){const t=(0,c.s)("space"),l=(0,s.Fl)((()=>[t.b(),t.m(e.direction),e.class])),a=(0,d.iH)(0),n=(0,d.iH)(0),r=(0,s.Fl)((()=>{const t=e.wrap||e.fill?{flexWrap:"wrap",marginBottom:`-${n.value}px`}:{},l={alignItems:e.alignment};return[t,l,e.style]})),o=(0,s.Fl)((()=>{const t={paddingBottom:`${n.value}px`,marginRight:`${a.value}px`},l=e.fill?{flexGrow:1,minWidth:`${e.fillRatio}%`}:{};return[t,l]}));return(0,s.m0)((()=>{const{size:t="small",wrap:l,direction:r,fill:s}=e;if((0,u.kJ)(t)){const[e=0,l=0]=t;a.value=e,n.value=l}else{let e;e=(0,f.hj)(t)?t:g[t||"small"]||g.small,(l||s)&&"horizontal"===r?a.value=n.value=e:"horizontal"===r?(a.value=e,n.value=0):(n.value=e,a.value=0)}})),{classes:l,containerStyle:r,itemStyle:o}}var y=l(7609),v=l(2371);const h=(0,o.o8)({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:(0,o.Cq)([String,Object,Array]),default:""},style:{type:(0,o.Cq)([String,Array,Object]),default:""},alignment:{type:(0,o.Cq)(String),default:"center"},prefixCls:{type:String},spacer:{type:(0,o.Cq)([Object,String,Number,Array]),default:null,validator:e=>(0,s.lA)(e)||(0,f.hj)(e)||(0,u.HD)(e)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:y.k,validator:e=>(0,f.hj)(e)||(0,u.kJ)(e)&&2===e.length&&e.every(f.hj)}});var w=(0,s.aZ)({name:"ElSpace",props:h,setup(e,{slots:t}){const{classes:l,containerStyle:a,itemStyle:n}=m(e);function r(t,l="",a=[]){const{prefixCls:o}=e;return t.forEach(((e,t)=>{(0,v.M2)(e)?(0,u.kJ)(e.children)&&e.children.forEach(((e,t)=>{(0,v.M2)(e)&&(0,u.kJ)(e.children)?r(e.children,`${l+t}-`,a):a.push((0,s.Wm)(p,{style:n.value,prefixCls:o,key:`nested-${l+t}`},{default:()=>[e]},v.y.PROPS|v.y.STYLE,["style","prefixCls"]))})):(0,v.Lg)(e)&&a.push((0,s.Wm)(p,{style:n.value,prefixCls:o,key:`LoopKey${l+t}`},{default:()=>[e]},v.y.PROPS|v.y.STYLE,["style","prefixCls"]))})),a}return()=>{var o;const{spacer:c,direction:i}=e,p=(0,s.WI)(t,"default",{key:0},(()=>[]));if(0===(null!=(o=p.children)?o:[]).length)return null;if((0,u.kJ)(p.children)){let e=r(p.children);if(c){const t=e.length-1;e=e.reduce(((e,l,a)=>{const r=[...e,l];return a!==t&&r.push((0,s.Wm)("span",{style:[n.value,"vertical"===i?"width: 100%":null],key:a},[(0,s.lA)(c)?c:(0,s.Uk)(c,v.y.TEXT)],v.y.STYLE)),r}),[])}return(0,s.Wm)("div",{class:l.value,style:a.value},e,v.y.STYLE|v.y.CLASS)}return p.children}}}),b=l(9015);const _=(0,b.nz)(w);l(1758),l(9007),l(7086);var k=l(300),C=(l(88),l(9776)),S=(l(6885),l(8179)),j=(l(6809),l(4902)),x=(l(8839),l(3417)),W=(l(172),l(7488)),$=(l(9406),l(9242)),z=l(2748),N=l(1565),U=l(1159),q=l(4308),E=l(2483),L=l(7701),I=l(1766);const F=e=>((0,s.dD)("data-v-7306e47e"),e=e(),(0,s.Cn)(),e),O={class:"input"},R=(0,s.Uk)("启动爬虫"),T={id:"source_check"},Z=F((()=>(0,s._)("span",{style:{color:"#ebd172"}}," 注: 5577渠道接口不稳定,慎用(网站打开很慢) ",-1))),A={key:2,type:"flex",justify:"center",style:{color:"red"}},B=F((()=>(0,s._)("br",null,null,-1))),D={id:" result_table"},H=(0,s.Uk)(" 中止任务 "),V=(0,s.Uk)(" 查看详情 "),J=(0,s.Uk)(" 查看Log ");var K=(0,s.aZ)({__name:"IndexView",setup(e){const t=(0,d.iH)(""),l=(0,d.iH)(void 0),u=(0,E.tv)(),o=(0,d.iH)([]),c=(0,s.Fl)((()=>o.value.filter((e=>e.is_checked)).map((e=>e.label)))),i=(0,d.iH)(new L.t([]));function p(){(0,q.yu)().then((e=>{o.value=e.source.map((e=>({label:e,is_checked:!0}))),I.Z.emit("sources_array",o.value)}))}const f=e=>{(0,q.Iv)(e.date).then((t=>{"爬虫终止成功"==t.message?((0,N.z8)({showClose:!0,message:"成功中止任务",type:"success"}),e.state="已取消"):"爬虫已被终止"==t.message?((0,N.z8)({showClose:!0,message:"爬虫已被中止",type:"success"}),e.state="已取消"):(0,N.z8)({showClose:!0,message:"中止任务失败",type:"warning"})}))};let g=!1,m=1500;function y(){(0,q.nW)().then((e=>{i.value.data_list=e.content,i.value.length=e.content.length,g=i.value.data_list.every((e=>"已完成"===e.state||"已取消"===e.state))})),(0,q.IP)().then((e=>{let t=999;for(const l in e.content){const a=+e.content[l].schedule;a<t&&(t=a)}999!==t&&!0===g&&(console.log("定时任务激活"),g=!1,m=60*t*60*1e3+3,console.log(m))}))}let v=null;function h(){null===v&&(g=!1,v=window.setInterval((()=>{g?(clearInterval(v),v=null):y()}),m))}const w=e=>{console.log(e),u.push({name:"log",query:{date:e.date,sources:e.source.toString()}})},b=e=>{console.log(e),u.push({name:"details",query:{date:e.date,sources:e.source.toString()}})},F=(0,s.Fl)((()=>i.value.get_data())),K=e=>{i.value.page=e},Y=e=>{i.value.page_size=e};(0,s.wF)((()=>{h(),p(),y()})),(0,s.bv)((()=>{l.value.focus()})),(0,s.Ah)((()=>{null!==v&&(console.log("结束任务"),clearInterval(v),v=null)}));const P=()=>{""!=t.value?0!==c.value.length?G():N.z8.error("没有选择渠道,请选择!"):N.z8.error("没有输入查询游戏名,请输入!")},G=()=>{U.T.confirm("确认启动爬虫吗?","消息",{confirmButtonText:"确认",cancelButtonText:"取消",type:"info",center:!0}).then((()=>{(0,q.BL)(t.value,c.value).then((e=>{e?((0,N.z8)({type:"success",message:"爬虫启动成功~"}),y(),h()):(0,N.z8)({type:"warning",message:"爬虫启动失败!"})}))})).catch((()=>{(0,N.z8)({type:"info",message:"取消爬虫"})}))};return(e,u)=>{const c=W.mR,p=x.EZ,g=j.Dv,m=S.mi,y=C.dq,v=k.Xb,h=a.b2,N=r.$Y,U=_,q=r.eI,E=n.R,L=a.F_,I=a.G4;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(c,{right:100,bottom:100}),(0,s.Wm)(I,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s._)("div",O,[(0,s.Wm)(y,{gutter:15,type:"flex",justify:"center"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{span:5},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=e=>t.value=e),onKeyup:(0,$.D2)(P,["enter"]),class:"w-50 m-2",maxlength:"25",placeholder:"请输入查询游戏名称",clearable:"",type:"text","prefix-icon":(0,d.SU)(z.olm),ref_key:"input_ref",ref:l},null,8,["modelValue","onKeyup","prefix-icon"])])),_:1}),(0,s.Wm)(g,{span:2},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{type:"primary",round:"",icon:(0,d.SU)(z.olm),onClick:P},{default:(0,s.w5)((()=>[R])),_:1},8,["icon"])])),_:1})])),_:1})]),(0,s._)("div",T,[0!==o.value.length?((0,s.wg)(),(0,s.j4)(y,{key:0,gutter:15,type:"flex",justify:"center"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.value,((e,t)=>((0,s.wg)(),(0,s.j4)(g,{span:2,key:t},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{modelValue:e.is_checked,"onUpdate:modelValue":t=>e.is_checked=t,label:e.label,size:"large"},null,8,["modelValue","onUpdate:modelValue","label"])])),_:2},1024)))),128))])),_:1})):(0,s.kq)("",!0),0!==o.value.length?((0,s.wg)(),(0,s.j4)(y,{key:1,type:"flex",justify:"center"},{default:(0,s.w5)((()=>[Z])),_:1})):((0,s.wg)(),(0,s.iD)("span",A," 渠道接口加载失败,请检查服务器或刷新重试 ")),B])])),_:1}),(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s._)("div",D,[(0,s.Wm)(q,{class:"elTable",data:(0,d.SU)(F),border:"","header-cell-style":{background:"#2980B9",color:"white",borderColor:"black"},"cell-style":{borderColor:"black"}},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{align:"center",prop:"date",label:"时间",width:"250"}),(0,s.Wm)(N,{align:"center",prop:"keyword",label:"关键词"}),(0,s.Wm)(N,{align:"center",prop:"source",label:"渠道"}),(0,s.Wm)(N,{align:"center",prop:"state",label:"状态"}),(0,s.Wm)(N,{align:"center",prop:"operations",label:"操作",width:"250"},{default:(0,s.w5)((e=>[(0,s.Wm)(U,{wrap:"",spacer:"|"},{default:(0,s.w5)((()=>["爬取数据中"===e.row.state?((0,s.wg)(),(0,s.j4)(m,{key:0,type:"danger",onClick:t=>f(e.row)},{default:(0,s.w5)((()=>[H])),_:2},1032,["onClick"])):"已完成"===e.row.state?((0,s.wg)(),(0,s.j4)(m,{key:1,type:"success",onClick:t=>b(e.row)},{default:(0,s.w5)((()=>[V])),_:2},1032,["onClick"])):(0,s.kq)("",!0),(0,s.Wm)(m,{onClick:t=>w(e.row)},{default:(0,s.w5)((()=>[J])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"]),(0,s.Wm)(E,{background:"",layout:"total, prev, pager, next","page-size":i.value.page_size,total:i.value.length,onCurrentChange:K,onSizeChange:Y},null,8,["page-size","total"])])])),_:1})])),_:1})])}}}),Y=l(89);const P=(0,Y.Z)(K,[["__scopeId","data-v-7306e47e"]]);var G=P},4902:function(e,t,l){l.d(t,{Dv:function(){return v}});var a=l(3396),n=l(7139),r=l(4870),s=l(5994),u=l(3071);const o=(0,s.o8)({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:(0,s.Cq)([Number,Object]),default:()=>(0,u.N)({})},sm:{type:(0,s.Cq)([Number,Object]),default:()=>(0,u.N)({})},md:{type:(0,s.Cq)([Number,Object]),default:()=>(0,u.N)({})},lg:{type:(0,s.Cq)([Number,Object]),default:()=>(0,u.N)({})},xl:{type:(0,s.Cq)([Number,Object]),default:()=>(0,u.N)({})}});var c=l(5989),i=l(7504),p=l(6734),d=l(3365);const f={name:"ElCol"},g=(0,a.aZ)({...f,props:o,setup(e){const t=e,{gutter:l}=(0,a.f3)(i.j,{gutter:(0,a.Fl)((()=>0))}),s=(0,p.s)("col"),u=(0,a.Fl)((()=>{const e={};return l.value&&(e.paddingLeft=e.paddingRight=l.value/2+"px"),e})),o=(0,a.Fl)((()=>{const e=[],a=["span","offset","pull","push"];a.forEach((l=>{const a=t[l];(0,d.hj)(a)&&("span"===l?e.push(s.b(`${t[l]}`)):a>0&&e.push(s.b(`${l}-${t[l]}`)))}));const r=["xs","sm","md","lg","xl"];return r.forEach((l=>{(0,d.hj)(t[l])?e.push(s.b(`${l}-${t[l]}`)):(0,n.Kn)(t[l])&&Object.entries(t[l]).forEach((([t,a])=>{e.push("span"!==t?s.b(`${l}-${t}-${a}`):s.b(`${l}-${a}`))}))})),l.value&&e.push(s.is("guttered")),e}));return(e,t)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,n.C_)([(0,r.SU)(s).b(),(0,r.SU)(o)]),style:(0,n.j5)((0,r.SU)(u))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class","style"]))}});var m=(0,c.Z)(g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]),y=l(9015);const v=(0,y.nz)(m)},8839:function(e,t,l){l(1758)},9776:function(e,t,l){l.d(t,{dq:function(){return v}});var a=l(3396),n=l(7139),r=l(4870),s=l(5994);const u=["start","center","end","space-around","space-between","space-evenly"],o=["top","middle","bottom"],c=(0,s.o8)({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:u,default:"start"},align:{type:String,values:o,default:"top"}});var i=l(5989),p=l(6734),d=l(7504);const f={name:"ElRow"},g=(0,a.aZ)({...f,props:c,setup(e){const t=e,l=(0,p.s)("row"),s=(0,a.Fl)((()=>t.gutter));(0,a.JJ)(d.j,{gutter:s});const u=(0,a.Fl)((()=>{const e={};return t.gutter?(e.marginRight=e.marginLeft=`-${t.gutter/2}px`,e):e}));return(e,s)=>((0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,n.C_)([(0,r.SU)(l).b(),(0,r.SU)(l).is(`justify-${t.justify}`,"start"!==e.justify),(0,r.SU)(l).is(`align-${t.align}`,"top"!==e.align)]),style:(0,n.j5)((0,r.SU)(u))},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"default")])),_:3},8,["class","style"]))}});var m=(0,i.Z)(g,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]),y=l(9015);const v=(0,y.nz)(m)},6885:function(e,t,l){l(1758)},7504:function(e,t,l){l.d(t,{j:function(){return a}});const a=Symbol("rowContextKey")}}]);