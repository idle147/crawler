"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[499],{5036:function(e,n,l){l.d(n,{F8:function(){return X}});var t=l(3396),a=l(4870),i=l(7139),o=l(3365),s=l(6367),r=l(9242),u=(l(1703),l(4146)),c=l(6049),d="Expected a function";function v(e,n,l){var t=!0,a=!0;if("function"!=typeof e)throw new TypeError(d);return(0,c.Z)(l)&&(t="leading"in l?!!l.leading:t,a="trailing"in l?!!l.trailing:a),(0,u.Z)(e,n,{leading:t,maxWait:n,trailing:a})}var f=v,p=l(1015),m=l(2748),g=l(5994),w=l(3071);const S=(0,g.o8)({urlList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0}}),k={close:()=>!0,switch:e=>(0,o.hj)(e)};var y=l(5989);const U=()=>o.C5&&/firefox/i.test(window.navigator.userAgent);var b=l(2137),C=l(6734),_=l(7750),h=l(9619),I=l(9953);const x=["src"],O={name:"ElImageViewer"},z=(0,t.aZ)({...O,props:S,emits:k,setup(e,{emit:n}){const l=e,u={CONTAIN:{name:"contain",icon:(0,a.Xl)(m.ITT)},ORIGINAL:{name:"original",icon:(0,a.Xl)(m.rGh)}},c=U()?"DOMMouseScroll":"mousewheel",{t:d}=(0,b.bU)(),v=(0,C.s)("image-viewer"),{nextZIndex:g}=(0,_.C)(),w=(0,a.iH)(),S=(0,a.iH)([]),k=(0,a.B)(),y=(0,a.iH)(!0),O=(0,a.iH)(l.initialIndex),z=(0,a.XI)(u.CONTAIN),W=(0,a.iH)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),N=(0,t.Fl)((()=>{const{urlList:e}=l;return e.length<=1})),H=(0,t.Fl)((()=>0===O.value)),T=(0,t.Fl)((()=>O.value===l.urlList.length-1)),F=(0,t.Fl)((()=>l.urlList[O.value])),L=(0,t.Fl)((()=>{const{scale:e,deg:n,offsetX:l,offsetY:t,enableTransition:a}=W.value;let i=l/e,o=t/e;switch(n%360){case 90:case-270:[i,o]=[o,-i];break;case 180:case-180:[i,o]=[-i,-o];break;case 270:case-90:[i,o]=[-o,i];break}const s={transform:`scale(${e}) rotate(${n}deg) translate(${i}px, ${o}px)`,transition:a?"transform .3s":""};return z.value.name===u.CONTAIN.name&&(s.maxWidth=s.maxHeight="100%"),s})),Y=(0,t.Fl)((()=>(0,o.hj)(l.zIndex)?l.zIndex:g()));function D(){q(),n("close")}function A(){const e=f((e=>{switch(e.code){case h.n.esc:l.closeOnPressEscape&&D();break;case h.n.space:X();break;case h.n.left:M();break;case h.n.up:P("zoomIn");break;case h.n.right:$();break;case h.n.down:P("zoomOut");break}})),n=f((e=>{const n=e.wheelDelta?e.wheelDelta:-e.detail;P(n>0?"zoomIn":"zoomOut",{zoomRate:1.2,enableTransition:!1})}));k.run((()=>{(0,s.ORN)(document,"keydown",e),(0,s.ORN)(document,c,n)}))}function q(){k.stop()}function E(){y.value=!1}function R(e){y.value=!1,e.target.alt=d("el.image.error")}function j(e){if(y.value||0!==e.button||!w.value)return;W.value.enableTransition=!1;const{offsetX:n,offsetY:l}=W.value,t=e.pageX,a=e.pageY,i=f((e=>{W.value={...W.value,offsetX:n+e.pageX-t,offsetY:l+e.pageY-a}})),o=(0,s.ORN)(document,"mousemove",i);(0,s.ORN)(document,"mouseup",(()=>{o()})),e.preventDefault()}function B(){W.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function X(){if(y.value)return;const e=(0,I.uc)(u),n=Object.values(u),l=z.value.name,t=n.findIndex((e=>e.name===l)),a=(t+1)%e.length;z.value=u[e[a]],B()}function M(){if(H.value&&!l.infinite)return;const e=l.urlList.length;O.value=(O.value-1+e)%e}function $(){if(T.value&&!l.infinite)return;const e=l.urlList.length;O.value=(O.value+1)%e}function P(e,n={}){if(y.value)return;const{zoomRate:l,rotateDeg:t,enableTransition:a}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...n};switch(e){case"zoomOut":W.value.scale>.2&&(W.value.scale=Number.parseFloat((W.value.scale/l).toFixed(3)));break;case"zoomIn":W.value.scale<7&&(W.value.scale=Number.parseFloat((W.value.scale*l).toFixed(3)));break;case"clockwise":W.value.deg+=t;break;case"anticlockwise":W.value.deg-=t;break}W.value.enableTransition=a}return(0,t.YP)(F,(()=>{(0,t.Y3)((()=>{const e=S.value[0];(null==e?void 0:e.complete)||(y.value=!0)}))})),(0,t.YP)(O,(e=>{B(),n("switch",e)})),(0,t.bv)((()=>{var e,n;A(),null==(n=null==(e=w.value)?void 0:e.focus)||n.call(e)})),(e,n)=>((0,t.wg)(),(0,t.j4)(t.lR,{to:"body",disabled:!e.teleported},[(0,t.Wm)(r.uT,{name:"viewer-fade",appear:""},{default:(0,t.w5)((()=>[(0,t._)("div",{ref_key:"wrapper",ref:w,tabindex:-1,class:(0,i.C_)((0,a.SU)(v).e("wrapper")),style:(0,i.j5)({zIndex:(0,a.SU)(Y)})},[(0,t._)("div",{class:(0,i.C_)((0,a.SU)(v).e("mask")),onClick:n[0]||(n[0]=(0,r.iM)((n=>e.hideOnClickModal&&D()),["self"]))},null,2),(0,t.kq)(" CLOSE "),(0,t._)("span",{class:(0,i.C_)([(0,a.SU)(v).e("btn"),(0,a.SU)(v).e("close")]),onClick:D},[(0,t.Wm)((0,a.SU)(p.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.x8P))])),_:1})],2),(0,t.kq)(" ARROW "),(0,a.SU)(N)?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t._)("span",{class:(0,i.C_)([(0,a.SU)(v).e("btn"),(0,a.SU)(v).e("prev"),(0,a.SU)(v).is("disabled",!e.infinite&&(0,a.SU)(H))]),onClick:M},[(0,t.Wm)((0,a.SU)(p.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.XdH))])),_:1})],2),(0,t._)("span",{class:(0,i.C_)([(0,a.SU)(v).e("btn"),(0,a.SU)(v).e("next"),(0,a.SU)(v).is("disabled",!e.infinite&&(0,a.SU)(T))]),onClick:$},[(0,t.Wm)((0,a.SU)(p.gn),null,{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.olP))])),_:1})],2)],64)),(0,t.kq)(" ACTIONS "),(0,t._)("div",{class:(0,i.C_)([(0,a.SU)(v).e("btn"),(0,a.SU)(v).e("actions")])},[(0,t._)("div",{class:(0,i.C_)((0,a.SU)(v).e("actions__inner"))},[(0,t.Wm)((0,a.SU)(p.gn),{onClick:n[1]||(n[1]=e=>P("zoomOut"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.H9A))])),_:1}),(0,t.Wm)((0,a.SU)(p.gn),{onClick:n[2]||(n[2]=e=>P("zoomIn"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.DYM))])),_:1}),(0,t._)("i",{class:(0,i.C_)((0,a.SU)(v).e("actions__divider"))},null,2),(0,t.Wm)((0,a.SU)(p.gn),{onClick:X},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)((0,a.SU)(z).icon)))])),_:1}),(0,t._)("i",{class:(0,i.C_)((0,a.SU)(v).e("actions__divider"))},null,2),(0,t.Wm)((0,a.SU)(p.gn),{onClick:n[3]||(n[3]=e=>P("anticlockwise"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.Ufu))])),_:1}),(0,t.Wm)((0,a.SU)(p.gn),{onClick:n[4]||(n[4]=e=>P("clockwise"))},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(m.Vyf))])),_:1})],2)],2),(0,t.kq)(" CANVAS "),(0,t._)("div",{class:(0,i.C_)((0,a.SU)(v).e("canvas"))},[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.urlList,((e,n)=>(0,t.wy)(((0,t.wg)(),(0,t.iD)("img",{ref_for:!0,ref:e=>S.value[n]=e,key:e,src:e,style:(0,i.j5)((0,a.SU)(L)),class:(0,i.C_)((0,a.SU)(v).e("img")),onLoad:E,onError:R,onMousedown:j},null,46,x)),[[r.F8,n===O.value]]))),128))],2),(0,t.WI)(e.$slots,"default")],6)])),_:3})],8,["disabled"]))}});var W=(0,y.Z)(z,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]),N=l(9015);const H=(0,N.nz)(W),T=(0,g.o8)({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:(0,g.Cq)([String,Object])},previewSrcList:{type:(0,g.Cq)(Array),default:()=>(0,w.N)([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0}}),F={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,o.hj)(e),close:()=>!0,show:()=>!0};var L=l(8053);const Y=(e,n)=>{if(!o.C5||!e||!n)return!1;const l=e.getBoundingClientRect();let t;return t=n instanceof Element?n.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},l.top<t.bottom&&l.bottom>t.top&&l.right>t.left&&l.left<t.right};var D=l(7354),A=l(9304);const q=["src","loading"],E={key:0},R={name:"ElImage",inheritAttrs:!1},j=(0,t.aZ)({...R,props:T,emits:F,setup(e,{emit:n}){const l=e;let r="";const{t:u}=(0,b.bU)(),c=(0,C.s)("image"),d=(0,t.l1)(),v=(0,L.l)(),f=(0,a.iH)(),p=(0,a.iH)(!1),m=(0,a.iH)(!0),g=(0,a.iH)(!1),w=(0,a.iH)(),S=(0,a.iH)(),k=o.C5&&"loading"in HTMLImageElement.prototype;let y,U;const _=(0,t.Fl)((()=>d.style)),h=(0,t.Fl)((()=>{const{fit:e}=l;return o.C5&&e?{objectFit:e}:{}})),I=(0,t.Fl)((()=>{const{previewSrcList:e}=l;return Array.isArray(e)&&e.length>0})),x=(0,t.Fl)((()=>{const{previewSrcList:e,initialIndex:n}=l;let t=n;return n>e.length-1&&(t=0),t})),O=(0,t.Fl)((()=>"eager"!==l.loading&&(!k&&"lazy"===l.loading||l.lazy))),z=()=>{o.C5&&(m.value=!0,p.value=!1,f.value=l.src)};function W(e){m.value=!1,p.value=!1,n("load",e)}function N(e){m.value=!1,p.value=!0,n("error",e)}function T(){Y(w.value,S.value)&&(z(),j())}const F=(0,o.vA)(T,200);async function R(){var e;if(!o.C5)return;await(0,t.Y3)();const{scrollContainer:n}=l;(0,D.kK)(n)?S.value=n:(0,i.HD)(n)&&""!==n?S.value=null!=(e=document.querySelector(n))?e:void 0:w.value&&(S.value=(0,A.JX)(w.value)),S.value&&(y=(0,s.ORN)(S,"scroll",F),setTimeout((()=>T()),100))}function j(){o.C5&&S.value&&F&&(null==y||y(),S.value=void 0)}function B(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}function X(){I.value&&(U=(0,s.ORN)("wheel",B,{passive:!1}),r=document.body.style.overflow,document.body.style.overflow="hidden",g.value=!0,n("show"))}function M(){null==U||U(),document.body.style.overflow=r,g.value=!1,n("close")}function $(e){n("switch",e)}return(0,t.YP)((()=>l.src),(()=>{O.value?(m.value=!0,p.value=!1,j(),R()):z()})),(0,t.bv)((()=>{O.value?R():z()})),(e,n)=>((0,t.wg)(),(0,t.iD)("div",{ref_key:"container",ref:w,class:(0,i.C_)([(0,a.SU)(c).b(),e.$attrs.class]),style:(0,i.j5)((0,a.SU)(_))},[void 0===f.value||p.value?(0,t.kq)("v-if",!0):((0,t.wg)(),(0,t.iD)("img",(0,t.dG)({key:0},(0,a.SU)(v),{src:f.value,loading:e.loading,style:(0,a.SU)(h),class:[(0,a.SU)(c).e("inner"),(0,a.SU)(I)&&(0,a.SU)(c).e("preview"),m.value&&(0,a.SU)(c).is("loading")],onClick:X,onLoad:W,onError:N}),null,16,q)),m.value||p.value?((0,t.wg)(),(0,t.iD)("div",{key:1,class:(0,i.C_)((0,a.SU)(c).e("wrapper"))},[m.value?(0,t.WI)(e.$slots,"placeholder",{key:0},(()=>[(0,t._)("div",{class:(0,i.C_)((0,a.SU)(c).e("placeholder"))},null,2)])):p.value?(0,t.WI)(e.$slots,"error",{key:1},(()=>[(0,t._)("div",{class:(0,i.C_)((0,a.SU)(c).e("error"))},(0,i.zw)((0,a.SU)(u)("el.image.error")),3)])):(0,t.kq)("v-if",!0)],2)):(0,t.kq)("v-if",!0),(0,a.SU)(I)?((0,t.wg)(),(0,t.iD)(t.HY,{key:2},[g.value?((0,t.wg)(),(0,t.j4)((0,a.SU)(H),{key:0,"z-index":e.zIndex,"initial-index":(0,a.SU)(x),infinite:e.infinite,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:M,onSwitch:$},{default:(0,t.w5)((()=>[e.$slots.viewer?((0,t.wg)(),(0,t.iD)("div",E,[(0,t.WI)(e.$slots,"viewer")])):(0,t.kq)("v-if",!0)])),_:3},8,["z-index","initial-index","infinite","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):(0,t.kq)("v-if",!0)],64)):(0,t.kq)("v-if",!0)],6))}});var B=(0,y.Z)(j,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const X=(0,N.nz)(B)},802:function(e,n,l){l(1758)}}]);